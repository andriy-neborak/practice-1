## Протокол зв'язку (UART Protocol)

Зв'язок здійснюється через UART (BaudRate: 38400).
Кожен пакет має фіксований розмір **6 байт**.

### Структура пакету
| Byte 0 | Byte 1 | Byte 2 | Byte 3 | Byte 4 | Byte 5 |
| :---: | :---: | :---: | :---: | :---: | :---: |
| **CMD** | **ADDR_H** | **ADDR_L** | **DATA_H** | **DATA_L** | **CRC** |
| Команда | Параметр 1 | Параметр 2 | Параметр 3 | Параметр 4 | Checksum |

* **CRC:** Розраховується за алгоритмом **CRC-8** (Поліном: `0x07`, Init: `0x00`).
* **Валідація:** Якщо CRC не збігається, контролер повертає пакет помилки: `EE EE EE EE EE EE`.

---

### Таблиця команд

| HEX | Команда | Параметри (Вхідні) | Відповідь (Byte 3, Byte 4) | Опис функції |
| :--- | :--- | :--- | :--- | :--- |
| **0x10** | `NEW GAME` | `00 00 00 00` | `00`, `AA` | Повністю очищає поле, скидає рахунок та генерує нові випадкові кольори. |
| **0x11** | `SWAP` | **B1**: Row 1<br>**B2**: Col 1<br>**B3**: Row 2<br>**B4**: Col 2 | `00`, `AA` (Успіх)<br>`00`, `EE` (Помилка) | Міняє місцями дві сусідні клітинки. Якщо хід не створює лінію ("Match-3"), обмін скасовується і повертається помилка. |
| **0x12** | `REMOVE` | *Reserved* | `00`, `AA` | Зарезервовано для налагодження (Debug). Наразі просто повертає статус OK. |
| **0x13** | `GET CELL` | `00 00 00 00` | `00`, `AA` | Примусовий запуск циклу гравітації (падіння фігур та заповнення пустот). |
| **0x14** | `GET CELL` | **B1**: Row (Рядок)<br>**B2**: Col (Стовпчик) | **B3**: ID кольору<br>**B4**: `AA` | Повертає ID кольору (1-6) у вказаній клітинці. Якщо координати невірні — повертає `EE`. |
| **0x15** | `SCORE` | `00 00 00 00` | **B3**: Score High<br>**B4**: Score Low | Повертає поточний рахунок гри (uint16_t) у двох байтах. |

### Коди статусів (Byte 4 у відповіді)
* **0xAA:** Операція виконана успішно (OK).
* **0xEE:** Помилка логіки (невірний хід, вихід за межі масиву).
* **0xFF:** Невідома команда.

### Приклади пакетів (HEX)
* **Отримати колір комірки (0,0):** `14 00 00 00 00 [CRC]`
* **Зробити хід (0,0) <-> (0,1):** `11 00 00 00 01 [CRC]`
* **Почати нову гру:** `10 00 00 00 00 [CRC]`

